# yaml-language-server: $schema= https://ocm.software/schemas/configuration-schema.yaml
# ocm get resources ghcr.io/ironcore-dev/ocm//github.com/ironcore-dev/gardener-extension-provider-ironcore --latest -r -o treewide
components:
  - name: github.com/ironcore-dev/gardener-extension-provider-ironcore
    version: "${VERSION}"
    provider:
      name: SAP SE
    sources:
      - name: main-source
        access:
          type: github
          repoUrl: github.com/ironcore-dev/gardener-extension-provider-ironcore
          ref: ${SOURCE_REF}
          commit: ${SOURCE_COMMIT_SHA}
        version: ${VERSION}
        type: git
        labels:
          - name: cloud.gardener/cicd/source
            value:
              repository-classification: main
    resources:
      - name: provider-ironcore
        type: helmChart
        version: "${VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/charts/gardener-extension-provider-ironcore:${CHART_VERSION}
      - name: gardener-extension-provider-ironcore
        type: ociImage
        version: "${VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/gardener-extension-provider-ironcore:${IMAGE_VERSION}
      - name: provider-ironcore-imagemap
        type: helmchart-imagemap
        input:
          type: file
          path: provider-ironcore-imagemap.json
          mediaType: application/json

      - name: admission-ironcore-application
        type: helmChart
        version: "${VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/charts/gardener-extension-admission-ironcore-application:${CHART_VERSION}
      - name: admission-ironcore-runtime
        type: helmChart
        version: "${VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/charts/gardener-extension-admission-ironcore-runtime:${CHART_VERSION}
      - name: gardener-extension-admission-ironcore
        type: ociImage
        version: "${VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/gardener-extension-admission-ironcore:${IMAGE_VERSION}
      - name: admission-ironcore-runtime-imagemap
        type: helmchart-imagemap
        input:
          type: file
          path: admission-ironcore-runtime-imagemap.json
          mediaType: application/json

      - name: cloud-controller-manager
        type: ociImage
        version: "${CLOUD_CONTROLLER_MANAGER_VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/cloud-provider-ironcore:${CLOUD_CONTROLLER_MANAGER_VERSION}
      - name: machine-controller-manager-provider-ironcore
        version: "${MACHINE_CONTROLLER_MANAGER_PROVIDER_IRONCORE_VERSION}"
        type: ociImage
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/machine-controller-manager-provider-ironcore:${MACHINE_CONTROLLER_MANAGER_PROVIDER_IRONCORE_VERSION}
      - name: csi-driver
        type: ociImage
        version: "${CSI_DRIVER_VERSION}"
        access:
          type: ociArtifact
          imageReference: ghcr.io/ironcore-dev/ironcore-csi-driver:${CSI_DRIVER_VERSION}
      - name: csi-provisioner
        type: ociImage
        version: "${CSI_PROVISIONER_VERSION}"
        access:
          type: ociArtifact
          imageReference: registry.k8s.io/sig-storage/csi-provisioner:${CSI_PROVISIONER_VERSION}
      - name: csi-attacher
        type: ociImage
        version: "${CSI_ATTACHER_VERSION}"
        access:
          type: ociArtifact
          imageReference: registry.k8s.io/sig-storage/csi-attacher:${CSI_ATTACHER_VERSION}
      - name: csi-resizer
        type: ociImage
        version: "${CSI_RESIZER_VERSION}"
        access:
          type: ociArtifact
          imageReference: registry.k8s.io/sig-storage/csi-resizer:${CSI_RESIZER_VERSION}
      - name: csi-node-driver-registrar
        type: ociImage
        version: "${CSI_NODE_DRIVER_REGISTRAR_VERSION}"
        access:
          type: ociArtifact
          imageReference: registry.k8s.io/sig-storage/csi-node-driver-registrar:${CSI_NODE_DRIVER_REGISTRAR_VERSION}
      - name: csi-liveness-probe
        type: ociImage
        version: "${CSI_LIVENESS_PROBE_VERSION}"
        access:
          type: ociArtifact
          imageReference: registry.k8s.io/sig-storage/livenessprobe:${CSI_LIVENESS_PROBE_VERSION}
